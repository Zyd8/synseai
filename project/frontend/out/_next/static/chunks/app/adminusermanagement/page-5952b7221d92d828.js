(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1114],{249:(e,t,r)=>{Promise.resolve().then(r.bind(r,7980))},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>c});var a=r(2115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(s),l=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var a,s,n;a=e,s=t,n=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){return t=>a.createElement(m,o({attr:d({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,d({key:r},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var r,{attr:s,size:n,title:i}=e,c=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,l),m=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:r,style:d(d({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>t(e)):t(s)}},7980:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(9460),n=r(9053),l=r(2115),o=r(5695),i=r(9911);function d(){let e="https://zydev.pythonanywhere.com",[t,r]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[m,u]=(0,l.useState)(null),[p,x]=(0,l.useState)(new Set),[h,g]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[N,_]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),[S,E]=(0,l.useState)(""),[O,A]=(0,l.useState)("all"),[P,D]=(0,l.useState)("all"),[U,F]=(0,l.useState)(null),[B,z]=(0,l.useState)(null),I=(0,o.useRouter)(),[T,R]=(0,l.useState)([]),[L,H]=(0,l.useState)("all"),[J,M]=(0,l.useState)({first_name:"",last_name:"",email:"",role:"user",password:"",contact_number:"",position:"",department_id:""}),[V,W]=(0,l.useState)({first_name:"",last_name:"",email:"",role:"",contact_number:"",position:"",department_id:""});(0,l.useEffect)(()=>{(async()=>{let t=sessionStorage.getItem("access_token");try{let r=await fetch("".concat(e,"/api/department"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!r.ok)throw Error("Failed to fetch departments");let a=await r.json();R(a.departments||[])}catch(e){console.error("Error fetching departments:",e),R([])}})()},[e]),(0,l.useEffect)(()=>{(async()=>{let t=sessionStorage.getItem("access_token");try{let a=await fetch("".concat(e,"/api/user"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch users");let s=await a.json();r(Array.isArray(s)?s:[])}catch(e){console.error("Error fetching users:",e),r([])}finally{c(!1)}})()},[e]);let q=(e,t)=>{if("admin"===t)return"Admin Department";if(!e)return"N/A";let r=T.find(t=>parseInt(t.id)===e||t.id===String(e));return r?r.name:"N/A"},Q=t.filter(e=>{let t=e.full_name.toLowerCase().includes(S.toLowerCase())||e.email.toLowerCase().includes(S.toLowerCase()),r="all"===O||e.role===O,a="all"===L||String(e.department_id)===L;return t&&r&&a}),X=async(t,a)=>{let s=sessionStorage.getItem("access_token");u(t);try{let n=await fetch("".concat(e,"/api/user/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){let e=await n.json();throw Error(e.message||"Failed to update user")}let l=await n.json();r(e=>e.map(e=>e.id===t?{...e,first_name:l.first_name,last_name:l.last_name,full_name:l.full_name,email:l.email,contact_number:l.contact_number,role:l.role,position:l.position,department_id:l.department_id}:e)),alert("User updated successfully!")}catch(e){console.error("Error updating user:",e),alert("Error updating user: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{u(null)}},Y=async()=>{if(!U)return;let e={first_name:V.first_name,last_name:V.last_name,email:V.email,role:V.role,contact_number:V.contact_number,position:V.position};"admin"!==V.role?e.department_id=V.department_id?parseInt(V.department_id):null:e.department_id=null,await X(U.id,e),j(!1),F(null),W({first_name:"",last_name:"",email:"",role:"",contact_number:"",position:"",department_id:""})},G=async()=>{if(!B)return;let t=sessionStorage.getItem("access_token");try{let a=await fetch("".concat(e,"/api/user/").concat(B.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to delete user")}r(e=>e.filter(e=>e.id!==B.id)),alert("User deleted successfully!")}catch(e){console.error("Error deleting user:",e),alert("Error deleting user: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{w(!1),z(null)}},K=async()=>{if(0===p.size)return void alert("Please select users first");if(!N&&!k)return void alert("Please select either a role or department to assign");let t=sessionStorage.getItem("access_token");try{let a={};N&&(a.role=N),k&&(a.department_id=parseInt(k));let s=Array.from(p).map(r=>fetch("".concat(e,"/api/user/").concat(r),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(a)})),n=await Promise.all(s),l=await Promise.all(n.map(e=>e.json()));r(e=>e.map(e=>{if(p.has(e.id)){let t=l.find(t=>t.id===e.id);return t?{...e,first_name:t.first_name,last_name:t.last_name,full_name:t.full_name,email:t.email,contact_number:t.contact_number,role:t.role,position:t.position,department_id:t.department_id}:e}return e})),x(new Set),_(""),C(""),f(!1),alert("Bulk assignment completed!")}catch(e){console.error("Error in bulk assignment:",e),alert("Error in bulk assignment: ".concat(e instanceof Error?e.message:"Unknown error"))}},Z=async()=>{if(!J.first_name||!J.last_name||!J.email||!J.password)return void alert("Please fill in all required fields");let t=sessionStorage.getItem("access_token");try{let a={first_name:J.first_name,last_name:J.last_name,email:J.email,password:J.password,role:J.role,contact_number:J.contact_number,position:J.position};"admin"!==J.role&&J.department_id&&(a.department_id=parseInt(J.department_id));let s=await fetch("".concat(e,"/api/auth/register"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to create user")}let n=await s.json(),l={id:n.user.id,first_name:n.user.first_name,last_name:n.user.last_name,full_name:n.user.full_name||"".concat(n.user.first_name," ").concat(n.user.last_name),email:n.user.email,contact_number:n.user.contact_number,role:n.user.role,position:n.user.position,department_id:n.user.department_id,created_at:n.user.created_at||new Date().toISOString()};r(e=>[...e,l]),M({first_name:"",last_name:"",email:"",role:"user",password:"",contact_number:"",position:"",department_id:""}),g(!1),alert("User created successfully!")}catch(e){console.error("Error creating user:",e),alert("Error creating user: ".concat(e instanceof Error?e.message:"Unknown error"))}},$=()=>{x(new Set(Q.map(e=>e.id)))},ee=()=>{x(new Set)},et=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"employee":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)(n.A,{allowedRoles:["admin"],children:[(0,a.jsxs)("div",{className:"flex min-h-screen  overflow-x-hidden",children:[(0,a.jsx)(s.A,{}),(0,a.jsxs)("div",{className:"flex-1 py-3 sm:py-6 pl-[2%] sm:pl-[3%] pr-[3%] sm:pr-[5%] overflow-x-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b-3 pb-2 sm:pb-4 border-red-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-700",children:"User Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 ",children:"Manage users, assign roles and departments, and control user access across the system."})]}),(0,a.jsxs)("button",{onClick:()=>I.push("/admindashboard"),className:"flex items-center gap-2 bg-red-700 text-white px-4 py-2 border-2 rounded-md hover:bg-white hover:text-[#B11016] hover-border-[#B11016]  transition",children:[(0,a.jsx)(i.QVr,{})," Back to Dashboard"]})]}),(0,a.jsxs)("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-500 text-center drop-shadow-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Users"}),(0,a.jsx)(i.YXz,{className:"text-3xl text-blue-600 mx-auto mt-2"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-500 text-center drop-shadow-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>"user"===e.role).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Collaborators"}),(0,a.jsx)(i.M5n,{className:"text-3xl text-green-600 mx-auto mt-2"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-500 text-center drop-shadow-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t.filter(e=>"employee"===e.role).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Employees"}),(0,a.jsx)(i.p7b,{className:"text-3xl text-purple-600 mx-auto mt-2"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-500 text-center drop-shadow-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-500",children:t.filter(e=>"admin"===e.role).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Administrators"}),(0,a.jsx)(i.e7y,{className:"text-3xl text-yellow-500 mx-auto mt-2"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-500 p-5 mt-5 mb-5 drop-shadow-md",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#B11016] mb-2",children:"Search Users"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",value:S,onChange:e=>E(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#B11016] mb-2",children:"Filter by Role"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",value:O,onChange:e=>A(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"admin",children:"Super Admin"}),(0,a.jsx)("option",{value:"employee",children:"Employee"}),(0,a.jsx)("option",{value:"user",children:"Collaborator"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#B11016] mb-2",children:"Filter by Department"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",value:L,onChange:e=>H(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Departments"}),T.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#B11016] mb-1",children:"Actions"}),(0,a.jsx)("button",{onClick:()=>g(!0),className:"w-full px-4 mt-0.5 py-2.5 bg-[#B11016] border border-2 text-white rounded-md hover:bg-white hover:border-[#B11016] hover:text-[#B11016] transition text-sm",children:"Create User"})]})]}),p.size>0&&(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[p.size," user(s) selected"]}),(0,a.jsx)("button",{onClick:()=>f(!0),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Bulk Assign Role/Department"}),(0,a.jsx)("button",{onClick:$,className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Select All"}),(0,a.jsx)("button",{onClick:ee,className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Clear Selection"})]})})]}),(0,a.jsx)("div",{className:"border border-gray-500 rounded-lg p-5 bg-white drop-shadow-xl",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:d?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Loading users..."}):0===Q.length?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"No users found."}):(0,a.jsxs)("table",{className:"w-full text-sm rounded-lg overflow-hidden min-w-[1200px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",onChange:p.size===Q.length?ee:$,checked:p.size===Q.length&&Q.length>0,className:"rounded border-gray-300"})}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"User ID"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Name"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Email"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Role"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Position"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Department"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Created Date"}),(0,a.jsx)("th",{className:"p-3 text-center text-red-700 whitespace-nowrap",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:Q.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("input",{type:"checkbox",checked:p.has(e.id),onChange:()=>(e=>{let t=new Set(p);t.has(e)?t.delete(e):t.add(e),x(t)})(e.id),className:"rounded border-gray-300"})}),(0,a.jsx)("td",{className:"p-3 whitespace-nowrap",children:e.id}),(0,a.jsx)("td",{className:"p-3 font-medium",children:e.full_name}),(0,a.jsx)("td",{className:"p-3",children:e.email}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(et(e.role)),children:e.role})}),(0,a.jsx)("td",{className:"p-3",children:e.position||"N/A"}),(0,a.jsx)("td",{className:"p-3",children:q(e.department_id,e.role)}),(0,a.jsx)("td",{className:"p-3 whitespace-nowrap",children:(e=>{let t=new Date(e);return"".concat(t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})," | ").concat(t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})(e.created_at)}),(0,a.jsx)("td",{className:"p-3 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{F(e),W({first_name:e.first_name,last_name:e.last_name,email:e.email,role:e.role,contact_number:e.contact_number||"",position:e.position||"",department_id:e.department_id?String(e.department_id):""}),j(!0)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",disabled:m===e.id,children:m===e.id?"Updating...":"Edit"}),(0,a.jsx)("span",{className:"text-gray-400",children:"|"}),(0,a.jsx)("button",{onClick:()=>{z(e),w(!0)},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},t))})]})})})]})]}),h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-red-700 mb-4",children:"Create New User"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,a.jsx)("input",{type:"text",value:J.first_name,onChange:e=>M({...J,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter first name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,a.jsx)("input",{type:"text",value:J.last_name,onChange:e=>M({...J,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter last name"})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,a.jsx)("input",{type:"email",value:J.email,onChange:e=>M({...J,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter email address"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),(0,a.jsx)("input",{type:"password",value:J.password,onChange:e=>M({...J,password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,a.jsx)("input",{type:"text",value:J.contact_number,onChange:e=>M({...J,contact_number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter contact number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),(0,a.jsx)("input",{type:"text",value:J.position,onChange:e=>M({...J,position:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter position/job title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,a.jsxs)("select",{value:J.role,onChange:e=>{var t;return t=e.target.value,void M({...J,role:t,department_id:"admin"===t?"":J.department_id})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,a.jsx)("option",{value:"user",children:"Collaborator"}),(0,a.jsx)("option",{value:"employee",children:"Employee"}),(0,a.jsx)("option",{value:"admin",children:"Super Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,a.jsxs)("select",{value:J.department_id,onChange:e=>M({...J,department_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",disabled:"admin"===J.role,children:[(0,a.jsx)("option",{value:"",children:"admin"===J.role?"Admins have no department":"Select Department (Optional)"}),"admin"!==J.role&&T.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),"admin"===J.role&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Admin users are not assigned to departments"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:Z,className:"flex-1 bg-[#B11016] text-white py-2 rounded-md hover:bg-red-700 transition",children:"Create User"}),(0,a.jsx)("button",{onClick:()=>{g(!1),M({first_name:"",last_name:"",email:"",role:"user",password:"",contact_number:"",position:"",department_id:""})},className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition",children:"Cancel"})]})]})}),y&&U&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-red-700 mb-4",children:"Edit User"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Editing ",(0,a.jsx)("span",{className:"font-medium",children:U.full_name})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,a.jsx)("input",{type:"text",value:V.first_name,onChange:e=>W({...V,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter first name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,a.jsx)("input",{type:"text",value:V.last_name,onChange:e=>W({...V,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter last name"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,a.jsx)("input",{type:"email",value:V.email,onChange:e=>W({...V,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter email address"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,a.jsx)("input",{type:"text",value:V.contact_number,onChange:e=>W({...V,contact_number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter contact number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),(0,a.jsx)("input",{type:"text",value:V.position,onChange:e=>W({...V,position:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter position/job title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Role"}),(0,a.jsx)("div",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium mb-2 ".concat(et(U.role)),children:U.role}),(0,a.jsxs)("select",{value:V.role,onChange:e=>W({...V,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,a.jsx)("option",{value:"user",children:"Collaborator"}),(0,a.jsx)("option",{value:"employee",children:"Employee"}),(0,a.jsx)("option",{value:"admin",children:"Super Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["Current: ",q(U.department_id,U.role)]}),(0,a.jsxs)("select",{value:V.department_id,onChange:e=>W({...V,department_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",disabled:"admin"===V.role,children:[(0,a.jsx)("option",{value:"",children:"admin"===V.role?"Admins have no department":"No Department"}),"admin"!==V.role&&T.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),"admin"===V.role&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Admin users are not assigned to departments"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:Y,disabled:m===U.id,className:"flex-1 bg-[#B11016] text-white py-2 rounded-md hover:bg-red-700 transition disabled:opacity-50",children:m===U.id?"Updating...":"Update User"}),(0,a.jsx)("button",{onClick:()=>{j(!1),F(null),W({first_name:"",last_name:"",email:"",role:"",contact_number:"",position:"",department_id:""})},className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition",children:"Cancel"})]})]})}),v&&B&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-red-700 mb-4",children:"Confirm Delete"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Are you sure you want to delete user ",(0,a.jsx)("span",{className:"font-medium",children:B.full_name}),"?"]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4",children:(0,a.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,a.jsx)("strong",{children:"Warning:"})," This action cannot be undone. The user will be permanently removed from the system."]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:G,className:"flex-1 bg-red-600 text-white py-2 rounded-md hover:bg-red-700 transition",children:"Delete User"}),(0,a.jsx)("button",{onClick:()=>{w(!1),z(null)},className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition",children:"Cancel"})]})]})}),b&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-red-700 mb-4",children:"Bulk Assignment"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Assign role and/or department to ",p.size," selected user(s)"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Role (Optional)"}),(0,a.jsxs)("select",{value:N,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,a.jsx)("option",{value:"",children:"Don't change role"}),(0,a.jsx)("option",{value:"user",children:"Collaborator"}),(0,a.jsx)("option",{value:"employee",children:"Employee"}),(0,a.jsx)("option",{value:"admin",children:"Super Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Department (Optional)"}),(0,a.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,a.jsx)("option",{value:"",children:"Don't change department"}),T.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:K,className:"flex-1 bg-[#B11016] text-white py-2 rounded-md hover:bg-red-700 transition",children:"Apply Changes"}),(0,a.jsx)("button",{onClick:()=>{f(!1),_(""),C("")},className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition",children:"Cancel"})]})]})})]})}},9053:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(5155),s=r(5695),n=r(2115);function l(e){let{children:t,allowedRoles:r}=e,l=(0,s.useRouter)(),[o,i]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=sessionStorage.getItem("access_token"),t=sessionStorage.getItem("role");return e&&t?r.includes(t)?void i(!1):void l.push("/"):void l.push("/login")},[l,r]),(0,a.jsx)(a.Fragment,{children:t})}},9460:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),s=r(2115),n=r(5695),l=r(8274);function o(){let e=(0,n.usePathname)(),[t,r]=(0,s.useState)(null);return(0,s.useEffect)(()=>{r(sessionStorage.getItem("role"))},[]),(0,a.jsxs)(l.P.aside,{initial:{x:-250,opacity:0},animate:{x:0,opacity:1},exit:{x:-250,opacity:0},transition:{duration:.2,ease:[.25,.1,.25,1]},className:"pl-4 group relative bg-white border-r flex flex-col items-center items-start py-4 space-y-6 h-screen w-20 hover:w-56 transition-all duration-300 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pl-1",children:[(0,a.jsx)("img",{src:"/logo/synsei_icon.png",alt:"Logo",className:"w-10"}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Synsei"})]}),(0,a.jsx)("nav",{className:"flex flex-col space-y-2 w-[92%]",children:("user"===t?[{href:"/dashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/collabapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/collabinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/collabrejected",icon:"/images/Folder_del.png",label:"Rejected"}]:"employee"===t?[{href:"/bpidashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/bpifilesviewer",icon:"/images/Folder_del.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:"admin"===t?[{href:"/admindashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/adminfilesviewer",icon:"/images/Folder_del.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:[]).map((t,r)=>(0,a.jsxs)("a",{href:t.href,className:"flex items-center gap-3 rounded-lg transition-all duration-200\n              ".concat(e===t.href?"bg-[#FEC2C5]":"hover:bg-gray-100","\n              px-2 py-2 w-12 group-hover:w-full"),children:[(0,a.jsx)("img",{src:t.icon,alt:t.label,className:"w-8 h-8"}),(0,a.jsx)("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:t.label})]},r))})]})}}},e=>{e.O(0,[6711,8324,8441,5964,7358],()=>e(e.s=249)),_N_E=e.O()}]);