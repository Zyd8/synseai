(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{1767:(e,t,s)=>{Promise.resolve().then(s.bind(s,9690))},9690:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),i=s(6874),n=s.n(i),o=s(5695),l=s(8274);function c(){let e="http://localhost:5000",[t,s]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(null),[u,p]=(0,r.useState)("error"),x=(0,o.useRouter)(),h=async s=>{if(s.preventDefault(),!t.trim()||!i.trim()){m("Please fill in all required fields."),p("error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){m("Please enter a valid email address."),p("error");return}try{let s=await fetch("".concat(e,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:i})}),r=await s.json();if(s.ok&&r.access_token){var a;sessionStorage.setItem("access_token",r.access_token),r.user&&(sessionStorage.setItem("user",JSON.stringify(r.user)),sessionStorage.setItem("user_id",r.user.id.toString()),null!==r.user.department_id&&void 0!==r.user.department_id&&sessionStorage.setItem("department_id",r.user.department_id.toString()));let t=null==(a=r.user)?void 0:a.role;if(t){sessionStorage.setItem("role",t),m("Login successful!"),p("success");let s=r.access_token;if(!(await fetch("".concat(e,"/api/company"),{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}})).ok)return void x.replace("/collabhome");setTimeout(()=>{"user"===t?x.push("/dashboard"):"employee"===t?x.push("/bpidashboard"):"admin"===t?x.push("/admindashboard"):x.push("/collabhome")},800)}else m("No role found, redirecting..."),p("error"),setTimeout(()=>x.push("/collabhome"),1e3)}else m(r.message||"Login failed. Please check your credentials."),p("error")}catch(e){console.error("Login error:",e),m(e.message||"An error occurred during login."),p("error")}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.25,.1,.25,1],staggerChildren:.15}}},b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.25,.1,.25,1]}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-white flex flex-col items-center px-4 py-6 sm:py-8",children:[(0,a.jsx)(l.P.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"mb-6 sm:mb-8",children:(0,a.jsx)("img",{src:"/logo/main_logo.png",alt:"SynseAI",className:"h-auto w-32 sm:w-40 md:w-48 mx-auto pt-6"})}),(0,a.jsxs)(l.P.div,{variants:g,initial:"hidden",animate:"visible",className:"w-full max-w-6xl flex flex-col lg:flex-row justify-between items-center gap-6 lg:gap-8",children:[(0,a.jsx)(l.P.div,{variants:b,className:"w-full lg:w-1/2 order-1 lg:order-2",children:(0,a.jsx)(l.P.img,{src:"/images/loginbanner.png",alt:"Login Illustration",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.25,.1,.25,1]},className:"w-full h-auto object-contain max-w-md mx-auto lg:max-w-none"})}),(0,a.jsx)(l.P.div,{variants:b,className:"w-full lg:w-1/2 max-w-md lg:max-w-lg order-2 lg:order-1 px-6 sm:px-10 lg:px-8 py-2",children:(0,a.jsxs)(l.P.div,{variants:g,className:"space-y-6",children:[d&&(0,a.jsx)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"px-4 py-2 rounded-md text-white text-sm sm:text-base font-medium ".concat("error"===u?"bg-red-500":"bg-green-500"),children:d}),(0,a.jsxs)(l.P.div,{variants:b,children:[(0,a.jsx)("label",{className:"block text-sm sm:text-base font-medium text-[#B11016] mb-2",children:"EMAIL"}),(0,a.jsxs)("div",{className:"relative w-full group",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Enter your email",className:"appearance-none w-full px-0 py-3 border-0 placeholder-gray-400 text-gray-900 bg-transparent focus:outline-none text-sm sm:text-base"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-gray-300"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 h-[2px] bg-[#B11016] transition-transform duration-300 ease-in-out origin-center scale-x-0 w-full group-focus-within:scale-x-100"})]})]}),(0,a.jsxs)(l.P.div,{variants:b,children:[(0,a.jsx)("label",{className:"block text-sm sm:text-base font-medium text-[#B11016] mb-2",children:"PASSWORD"}),(0,a.jsxs)("div",{className:"relative w-full group",children:[(0,a.jsx)("input",{type:"password",value:i,onChange:e=>c(e.target.value),placeholder:"Enter your password",className:"appearance-none w-full px-0 py-3 border-0 placeholder-gray-400 text-gray-900 bg-transparent focus:outline-none text-sm sm:text-base"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-gray-300"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 h-[2px] bg-[#B11016] transition-transform duration-300 ease-in-out origin-center scale-x-0 w-full group-focus-within:scale-x-100"})]})]}),(0,a.jsx)(l.P.div,{variants:b,className:"text-left mt-0",children:(0,a.jsx)("a",{className:"text-sm sm:text-md text-[#B11016] hover:text-red-500 font-medium cursor-pointer transition-colors duration-200",children:"Forgot password?"})}),(0,a.jsx)(l.P.button,{type:"button",onClick:h,whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-8 sm:mt-15 w-full flex justify-center py-3 sm:py-3 px-3 border border-transparent rounded-md text-sm font-bold text-white bg-[#B11016] hover:text-[#B11016] hover:bg-white hover:border-[#B11016] transition-all duration-300 ease-in-out text-base sm:text-lg",children:"LOGIN"}),(0,a.jsx)(l.P.div,{variants:b,className:"text-center pt-0",children:(0,a.jsxs)("span",{className:"text-sm sm:text-md text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)("span",{className:"font-medium text-[#B11016] hover:text-red-500 underline cursor-pointer transition-colors duration-200",children:(0,a.jsx)(n(),{href:"/signup",children:"Register now"})})]})})]})})]})]})}}},e=>{e.O(0,[8324,6874,8441,5964,7358],()=>e(e.s=1767)),_N_E=e.O()}]);