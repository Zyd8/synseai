(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5394],{760:(e,t,r)=>{"use strict";r.d(t,{N:()=>b});var s=r(5155),a=r(2115),o=r(869),n=r(2885),l=r(7494),i=r(845),c=r(7351),p=r(1508);class d extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,c.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:r,anchorX:o,root:n}=e,l=(0,a.useId)(),i=(0,a.useRef)(null),c=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,a.useContext)(p.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:a,right:p}=c.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=l;let d=document.createElement("style");h&&(d.nonce=h);let u=null!=n?n:document.head;return u.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===o?"left: ".concat(a):"right: ".concat(p),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{u.contains(d)&&u.removeChild(d)}},[r]),(0,s.jsx)(d,{isPresent:r,childRef:i,sizeRef:c,children:a.cloneElement(t,{ref:i})})}let u=e=>{let{children:t,initial:r,isPresent:o,onExitComplete:l,custom:c,presenceAffectsLayout:p,mode:d,anchorX:u,root:m}=e,g=(0,n.M)(f),x=(0,a.useId)(),b=!0,y=(0,a.useMemo)(()=>(b=!1,{id:x,initial:r,isPresent:o,custom:c,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;l&&l()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[o,g,l]);return p&&b&&(y={...y}),(0,a.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[o]),a.useEffect(()=>{o||g.size||!l||l()},[o]),"popLayout"===d&&(t=(0,s.jsx)(h,{isPresent:o,anchorX:u,root:m,children:t})),(0,s.jsx)(i.t.Provider,{value:y,children:t})};function f(){return new Map}var m=r(2082);let g=e=>e.key||"";function x(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let b=e=>{let{children:t,custom:r,initial:i=!0,onExitComplete:c,presenceAffectsLayout:p=!0,mode:d="sync",propagate:h=!1,anchorX:f="left",root:b}=e,[y,w]=(0,m.xQ)(h),j=(0,a.useMemo)(()=>x(t),[t]),v=h&&!y?[]:j.map(g),N=(0,a.useRef)(!0),_=(0,a.useRef)(j),C=(0,n.M)(()=>new Map),[E,P]=(0,a.useState)(j),[F,I]=(0,a.useState)(j);(0,l.E)(()=>{N.current=!1,_.current=j;for(let e=0;e<F.length;e++){let t=g(F[e]);v.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[F,v.length,v.join("-")]);let S=[];if(j!==E){let e=[...j];for(let t=0;t<F.length;t++){let r=F[t],s=g(r);v.includes(s)||(e.splice(t,0,r),S.push(r))}return"wait"===d&&S.length&&(e=S),I(x(e)),P(j),null}let{forceRender:A}=(0,a.useContext)(o.L);return(0,s.jsx)(s.Fragment,{children:F.map(e=>{let t=g(e),a=(!h||!!y)&&(j===F||v.includes(t));return(0,s.jsx)(u,{isPresent:a,initial:(!N.current||!!i)&&void 0,custom:r,presenceAffectsLayout:p,mode:d,root:b,onExitComplete:a?void 0:()=>{if(!C.has(t))return;C.set(t,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(null==A||A(),I(_.current),h&&(null==w||w()),c&&c())},anchorX:f,children:e},t)})})}},2217:(e,t,r)=>{Promise.resolve().then(r.bind(r,2527))},2527:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),a=r(2115),o=r(9460),n=r(9053),l=r(4769),i=r(760),c=r(8274);function p(){let[e,t]=(0,a.useState)([]),[r,p]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{let e=sessionStorage.getItem("access_token");try{let r=await fetch("".concat("http://localhost:5000","/api/proposal"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!r.ok)throw Error("Failed to fetch proposals");let s=await r.json(),a=(Array.isArray(s)?s:s.proposals||[]).filter(e=>{var t;return(null==(t=e.status)?void 0:t.toUpperCase())==="ONGOING"});t(a)}catch(e){console.error("Error fetching proposals:",e),t([])}finally{p(!1)}})()},[]),(0,s.jsx)(n.A,{allowedRoles:["user"],children:(0,s.jsx)(l.A,{children:(0,s.jsx)(i.N,{mode:"wait",children:(0,s.jsxs)(c.P.div,{variants:{initial:{opacity:0,y:30},animate:{opacity:1,y:0,transition:{duration:.5,ease:[.25,.1,.25,1]}},exit:{opacity:0,y:-30,transition:{duration:.4,ease:[.25,.1,.25,1]}}},initial:"initial",animate:"animate",exit:"exit",className:"flex min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,s.jsx)(o.A,{}),(0,s.jsxs)("div",{className:"flex-1 py-3 sm:py-6 pl-[2%] sm:pl-[3%] pr-[3%] sm:pr-[5%] overflow-x-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-700",children:"Ongoing Proposals"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1 border-b-3 border-black pb-2 sm:pb-4 border-red-700",children:"Track all your collaboration proposals that are currently in progress with BPI."}),(0,s.jsx)("div",{className:"border border-gray-500 rounded-lg p-5 bg-white drop-shadow-xl mt-5",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:r?(0,s.jsx)("p",{className:"text-center text-gray-500",children:"Loading proposals..."}):0===e.length?(0,s.jsx)("p",{className:"text-center text-gray-500",children:"No ongoing proposals found."}):(0,s.jsxs)("table",{className:"w-full text-sm rounded-lg overflow-hidden min-w-[600px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal ID"}),(0,s.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal Title"}),(0,s.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Status"}),(0,s.jsx)("th",{className:"p-3 text-center text-red-700 whitespace-nowrap",children:"Action"})]})}),(0,s.jsx)("tbody",{children:e.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"p-3 whitespace-nowrap",children:e.id}),(0,s.jsx)("td",{className:"p-3",children:e.title}),(0,s.jsx)("td",{className:"p-3",children:e.status}),(0,s.jsx)("td",{className:"p-3 text-center",children:"â‹®"})]},t))})]})})})]})]},"collabapproved-page")})})})}},4769:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),a=r(2115),o=r(5695);function n(e){let{children:t}=e,r="http://localhost:5000",n=(0,o.useRouter)(),[l,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=async()=>{let e=sessionStorage.getItem("access_token");if(!e)return void n.replace("/login");try{let t=await fetch("".concat(r,"/api/company"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){console.warn("Company fetch failed with status:",t.status),n.replace("/collabhome");return}let s=await t.json().catch(()=>null);if(!s||!s.id)return void n.replace("/collabhome");i(!1)}catch(e){console.error("Fetch error:",e.message),n.replace("/collabhome")}finally{i(!1)}};r?(console.log("API env:",r),console.log("Company URL:","".concat(r,"/api/company")),e()):console.error("NEXT_PUBLIC_API_URL is not defined")},[r,n]),(0,s.jsx)(s.Fragment,{children:t})}},9053:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),a=r(5695),o=r(2115);function n(e){let{children:t,allowedRoles:r}=e,n=(0,a.useRouter)(),[l,i]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=sessionStorage.getItem("access_token"),t=sessionStorage.getItem("role");return e&&t?r.includes(t)?void i(!1):void n.push("/"):void n.push("/login")},[n,r]),(0,s.jsx)(s.Fragment,{children:t})}},9460:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155),a=r(2115),o=r(5695),n=r(8274);function l(){let e=(0,o.usePathname)(),[t,r]=(0,a.useState)(null);return(0,a.useEffect)(()=>{r(sessionStorage.getItem("role"))},[]),(0,s.jsxs)(n.P.aside,{initial:{x:-250,opacity:0},animate:{x:0,opacity:1},exit:{x:-250,opacity:0},transition:{duration:.2,ease:[.25,.1,.25,1]},className:"pl-4 group relative bg-white border-r flex flex-col items-center items-start py-4 space-y-6 h-screen w-20 hover:w-56 transition-all duration-300 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 pl-1",children:[(0,s.jsx)("img",{src:"/logo/synsei_icon.png",alt:"Logo",className:"w-10"}),(0,s.jsx)("span",{className:"text-lg font-bold text-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Synsei"})]}),(0,s.jsx)("nav",{className:"flex flex-col space-y-2 w-[92%]",children:("user"===t?[{href:"/dashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/collabapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/collabinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/collabrejected",icon:"/images/Folder_del.png",label:"Rejected"}]:"employee"===t?[{href:"/bpidashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/bpifilesviewer",icon:"/images/Folder_del.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:"admin"===t?[{href:"/admindashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/adminfilesviewer",icon:"/images/Folder_del.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:[]).map((t,r)=>(0,s.jsxs)("a",{href:t.href,className:"flex items-center gap-3 rounded-lg transition-all duration-200\n              ".concat(e===t.href?"bg-[#FEC2C5]":"hover:bg-gray-100","\n              px-2 py-2 w-12 group-hover:w-full"),children:[(0,s.jsx)("img",{src:t.icon,alt:t.label,className:"w-8 h-8"}),(0,s.jsx)("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:t.label})]},r))})]})}}},e=>{e.O(0,[8324,8441,5964,7358],()=>e(e.s=2217)),_N_E=e.O()}]);