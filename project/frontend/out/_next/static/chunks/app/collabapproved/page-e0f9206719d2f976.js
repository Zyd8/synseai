(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6021],{760:(e,t,r)=>{"use strict";r.d(t,{N:()=>b});var a=r(5155),s=r(2115),o=r(869),n=r(2885),i=r(7494),l=r(845),c=r(7351),p=r(1508);class d extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,c.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:r,anchorX:o,root:n}=e,i=(0,s.useId)(),l=(0,s.useRef)(null),c=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,s.useContext)(p.Q);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:s,right:p}=c.current;if(r||!l.current||!e||!t)return;l.current.dataset.motionPopId=i;let d=document.createElement("style");h&&(d.nonce=h);let u=null!=n?n:document.head;return u.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===o?"left: ".concat(s):"right: ".concat(p),"px !important;\n            top: ").concat(a,"px !important;\n          }\n        ")),()=>{u.contains(d)&&u.removeChild(d)}},[r]),(0,a.jsx)(d,{isPresent:r,childRef:l,sizeRef:c,children:s.cloneElement(t,{ref:l})})}let u=e=>{let{children:t,initial:r,isPresent:o,onExitComplete:i,custom:c,presenceAffectsLayout:p,mode:d,anchorX:u,root:m}=e,x=(0,n.M)(f),g=(0,s.useId)(),b=!0,y=(0,s.useMemo)(()=>(b=!1,{id:g,initial:r,isPresent:o,custom:c,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;i&&i()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[o,x,i]);return p&&b&&(y={...y}),(0,s.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[o]),s.useEffect(()=>{o||x.size||!i||i()},[o]),"popLayout"===d&&(t=(0,a.jsx)(h,{isPresent:o,anchorX:u,root:m,children:t})),(0,a.jsx)(l.t.Provider,{value:y,children:t})};function f(){return new Map}var m=r(2082);let x=e=>e.key||"";function g(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let b=e=>{let{children:t,custom:r,initial:l=!0,onExitComplete:c,presenceAffectsLayout:p=!0,mode:d="sync",propagate:h=!1,anchorX:f="left",root:b}=e,[y,w]=(0,m.xQ)(h),v=(0,s.useMemo)(()=>g(t),[t]),j=h&&!y?[]:v.map(x),N=(0,s.useRef)(!0),S=(0,s.useRef)(v),_=(0,n.M)(()=>new Map),[P,E]=(0,s.useState)(v),[C,A]=(0,s.useState)(v);(0,i.E)(()=>{N.current=!1,S.current=v;for(let e=0;e<C.length;e++){let t=x(C[e]);j.includes(t)?_.delete(t):!0!==_.get(t)&&_.set(t,!1)}},[C,j.length,j.join("-")]);let k=[];if(v!==P){let e=[...v];for(let t=0;t<C.length;t++){let r=C[t],a=x(r);j.includes(a)||(e.splice(t,0,r),k.push(r))}return"wait"===d&&k.length&&(e=k),A(g(e)),E(v),null}let{forceRender:R}=(0,s.useContext)(o.L);return(0,a.jsx)(a.Fragment,{children:C.map(e=>{let t=x(e),s=(!h||!!y)&&(v===C||j.includes(t));return(0,a.jsx)(u,{isPresent:s,initial:(!N.current||!!l)&&void 0,custom:r,presenceAffectsLayout:p,mode:d,root:b,onExitComplete:s?void 0:()=>{if(!_.has(t))return;_.set(t,!0);let e=!0;_.forEach(t=>{t||(e=!1)}),e&&(null==R||R(),A(S.current),h&&(null==w||w()),c&&c())},anchorX:f,children:e},t)})})}},4769:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),s=r(2115),o=r(5695);function n(e){let{children:t}=e,r="http://127.0.0.1:5000",n=(0,o.useRouter)(),[i,l]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=async()=>{let e=sessionStorage.getItem("access_token");if(!e)return void n.replace("/login");try{let t=await fetch("".concat(r,"/api/company"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){console.warn("Company fetch failed with status:",t.status),n.replace("/collabhome");return}let a=await t.json().catch(()=>null);if(!a||!a.id)return void n.replace("/collabhome");l(!1)}catch(e){console.error("Fetch error:",e.message),n.replace("/collabhome")}finally{l(!1)}};r?(console.log("API env:",r),console.log("Company URL:","".concat(r,"/api/company")),e()):console.error("NEXT_PUBLIC_API_URL is not defined")},[r,n]),(0,a.jsx)(a.Fragment,{children:t})}},6027:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),s=r(9460),o=r(9053),n=r(4769),i=r(2115),l=r(760),c=r(8274);function p(){let e="http://127.0.0.1:5000",[t,r]=(0,i.useState)([]),[p,d]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{let t=sessionStorage.getItem("access_token");try{let a=await fetch("".concat(e,"/api/proposal"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch proposals");let s=await a.json(),o=(Array.isArray(s)?s:s.proposals||[]).filter(e=>"Approved"===e.status);r(o)}catch(e){console.error("Error fetching approved proposals:",e),r([])}finally{d(!1)}})()},[e]),(0,a.jsx)(o.A,{allowedRoles:["user"],children:(0,a.jsx)(n.A,{children:(0,a.jsx)(l.N,{mode:"wait",children:(0,a.jsxs)(c.P.div,{variants:{initial:{opacity:0,y:30},animate:{opacity:1,y:0,transition:{duration:.6,ease:[.25,.1,.25,1]}},exit:{opacity:0,y:-30,transition:{duration:.4,ease:[.25,.1,.25,1]}}},initial:"initial",animate:"animate",exit:"exit",className:"flex min-h-screen bg-gray-50",children:[(0,a.jsx)(s.A,{}),(0,a.jsxs)("div",{className:"flex-1 py-3 sm:py-6 pl-[2%] sm:pl-[3%] pr-[3%] sm:pr-[5%] overflow-x-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-700",children:"Approved Proposals"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 border-b-3 border-black pb-2 sm:pb-4 border-red-700",children:"Track all your collaboration proposals that have been approved with BPI."}),(0,a.jsx)("div",{className:"border border-gray-500 rounded-lg p-5 bg-white drop-shadow-xl mt-5",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm rounded-lg overflow-hidden min-w-[600px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal ID"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal Title"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Approved Date"}),(0,a.jsx)("th",{className:"p-3 text-center text-red-700 whitespace-nowrap",children:"Action"})]})}),(0,a.jsx)("tbody",{children:p?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Loading approved proposals..."})}):0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"No approved proposals found."})}):t.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"p-3 whitespace-nowrap",children:e.id}),(0,a.jsx)("td",{className:"p-3",children:e.title}),(0,a.jsx)("td",{className:"p-3",children:e.status}),(0,a.jsx)("td",{className:"p-3 whitespace-nowrap",children:(e=>{let t=new Date(e);return"".concat(t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})," | ").concat(t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})(e.updated_at||e.created_at)}),(0,a.jsx)("td",{className:"p-3 text-center",children:"â‹®"})]},t))})]})})})]})]},"collabapproved-page")})})})}},8910:(e,t,r)=>{Promise.resolve().then(r.bind(r,6027))},9053:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),s=r(5695),o=r(2115);function n(e){let{children:t,allowedRoles:r}=e,n=(0,s.useRouter)(),[i,l]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=sessionStorage.getItem("access_token"),t=sessionStorage.getItem("role");return e&&t?r.includes(t)?void l(!1):void n.push("/"):void n.push("/login")},[n,r]),(0,a.jsx)(a.Fragment,{children:t})}},9460:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),s=r(2115),o=r(5695),n=r(8274);function i(){let e=(0,o.usePathname)(),[t,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{l(!0),r(sessionStorage.getItem("role"))},[]),i)?(0,a.jsxs)(n.P.aside,{initial:{x:-250,opacity:0},animate:{x:0,opacity:1},exit:{x:-250,opacity:0},transition:{duration:.2,ease:[.25,.1,.25,1]},className:"fixed top-0 left-0 h-screen pl-4 group relative bg-white border-r flex flex-col items-start py-4 space-y-6 w-20 hover:w-56 transition-all duration-300 overflow-hidden z-50",style:{borderRight:"1px solid #e5e7eb"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pl-1 flex-shrink-0",children:[(0,a.jsx)("img",{src:"/logo/synsei_icon.png",alt:"Logo",className:"w-10"}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Synsei"})]}),(0,a.jsx)("nav",{className:"flex flex-col space-y-2 w-[92%] flex-shrink-0",children:("user"===t?[{href:"/dashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/collabapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/collabinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/collabrejected",icon:"/images/Folder_del.png",label:"Rejected"}]:"employee"===t?[{href:"/bpidashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/bpifilesviewer",icon:"/images/file-view.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:"admin"===t?[{href:"/admindashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/adminfilesviewer",icon:"/images/file-view.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:[]).map((t,r)=>(0,a.jsxs)("a",{href:t.href,className:"flex items-center gap-3 rounded-lg transition-all duration-200\n              ".concat(e===t.href?"bg-[#FEC2C5]":"hover:bg-gray-100","\n              px-2 py-2 w-12 group-hover:w-full"),children:[(0,a.jsx)("img",{src:t.icon,alt:t.label,className:"w-8 h-8"}),(0,a.jsx)("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:t.label})]},r))})]}):(0,a.jsxs)(n.P.aside,{initial:{x:-250,opacity:0},animate:{x:0,opacity:1},exit:{x:-250,opacity:0},transition:{duration:.2,ease:[.25,.1,.25,1]},className:"fixed top-0 left-0 h-screen pl-4 group relative bg-white border-r flex flex-col items-start py-4 space-y-6 w-20 hover:w-56 transition-all duration-300 overflow-hidden z-50",style:{borderRight:"1px solid #e5e7eb"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pl-1 flex-shrink-0",children:[(0,a.jsx)("img",{src:"/logo/synsei_icon.png",alt:"Logo",className:"w-10"}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Synsei"})]}),(0,a.jsx)("nav",{className:"flex flex-col space-y-2 w-[92%] flex-shrink-0"})]})}}},e=>{e.O(0,[8324,8441,5964,7358],()=>e(e.s=8910)),_N_E=e.O()}]);