(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6021],{760:(e,t,r)=>{"use strict";r.d(t,{N:()=>b});var a=r(5155),o=r(2115),s=r(869),n=r(2885),l=r(7494),i=r(845),c=r(7351),p=r(1508);class d extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,c.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:r,anchorX:s,root:n}=e,l=(0,o.useId)(),i=(0,o.useRef)(null),c=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,o.useContext)(p.Q);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:o,right:p}=c.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=l;let d=document.createElement("style");h&&(d.nonce=h);let u=null!=n?n:document.head;return u.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===s?"left: ".concat(o):"right: ".concat(p),"px !important;\n            top: ").concat(a,"px !important;\n          }\n        ")),()=>{u.contains(d)&&u.removeChild(d)}},[r]),(0,a.jsx)(d,{isPresent:r,childRef:i,sizeRef:c,children:o.cloneElement(t,{ref:i})})}let u=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:l,custom:c,presenceAffectsLayout:p,mode:d,anchorX:u,root:f}=e,g=(0,n.M)(m),x=(0,o.useId)(),b=!0,w=(0,o.useMemo)(()=>(b=!1,{id:x,initial:r,isPresent:s,custom:c,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;l&&l()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[s,g,l]);return p&&b&&(w={...w}),(0,o.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[s]),o.useEffect(()=>{s||g.size||!l||l()},[s]),"popLayout"===d&&(t=(0,a.jsx)(h,{isPresent:s,anchorX:u,root:f,children:t})),(0,a.jsx)(i.t.Provider,{value:w,children:t})};function m(){return new Map}var f=r(2082);let g=e=>e.key||"";function x(e){let t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}let b=e=>{let{children:t,custom:r,initial:i=!0,onExitComplete:c,presenceAffectsLayout:p=!0,mode:d="sync",propagate:h=!1,anchorX:m="left",root:b}=e,[w,y]=(0,f.xQ)(h),j=(0,o.useMemo)(()=>x(t),[t]),v=h&&!w?[]:j.map(g),N=(0,o.useRef)(!0),_=(0,o.useRef)(j),S=(0,n.M)(()=>new Map),[E,P]=(0,o.useState)(j),[C,A]=(0,o.useState)(j);(0,l.E)(()=>{N.current=!1,_.current=j;for(let e=0;e<C.length;e++){let t=g(C[e]);v.includes(t)?S.delete(t):!0!==S.get(t)&&S.set(t,!1)}},[C,v.length,v.join("-")]);let F=[];if(j!==E){let e=[...j];for(let t=0;t<C.length;t++){let r=C[t],a=g(r);v.includes(a)||(e.splice(t,0,r),F.push(r))}return"wait"===d&&F.length&&(e=F),A(x(e)),P(j),null}let{forceRender:I}=(0,o.useContext)(s.L);return(0,a.jsx)(a.Fragment,{children:C.map(e=>{let t=g(e),o=(!h||!!w)&&(j===C||v.includes(t));return(0,a.jsx)(u,{isPresent:o,initial:(!N.current||!!i)&&void 0,custom:r,presenceAffectsLayout:p,mode:d,root:b,onExitComplete:o?void 0:()=>{if(!S.has(t))return;S.set(t,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(null==I||I(),A(_.current),h&&(null==y||y()),c&&c())},anchorX:m,children:e},t)})})}},4769:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),o=r(2115),s=r(5695);function n(e){let{children:t}=e,r="http://localhost:5000",n=(0,s.useRouter)(),[l,i]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=async()=>{let e=sessionStorage.getItem("access_token");if(!e)return void n.replace("/login");try{let t=await fetch("".concat(r,"/api/company"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){console.warn("Company fetch failed with status:",t.status),n.replace("/collabhome");return}let a=await t.json().catch(()=>null);if(!a||!a.id)return void n.replace("/collabhome");i(!1)}catch(e){console.error("Fetch error:",e.message),n.replace("/collabhome")}finally{i(!1)}};r?(console.log("API env:",r),console.log("Company URL:","".concat(r,"/api/company")),e()):console.error("NEXT_PUBLIC_API_URL is not defined")},[r,n]),(0,a.jsx)(a.Fragment,{children:t})}},6027:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),o=r(9460),s=r(9053),n=r(4769),l=r(2115),i=r(760),c=r(8274);function p(){let e="http://localhost:5000",[t,r]=(0,l.useState)([]),[p,d]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{let t=sessionStorage.getItem("access_token");try{let a=await fetch("".concat(e,"/api/proposal"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch proposals");let o=await a.json(),s=(Array.isArray(o)?o:o.proposals||[]).filter(e=>"Approved"===e.status);r(s)}catch(e){console.error("Error fetching approved proposals:",e),r([])}finally{d(!1)}})()},[e]),(0,a.jsx)(s.A,{allowedRoles:["user"],children:(0,a.jsx)(n.A,{children:(0,a.jsx)(i.N,{mode:"wait",children:(0,a.jsxs)(c.P.div,{variants:{initial:{opacity:0,y:30},animate:{opacity:1,y:0,transition:{duration:.6,ease:[.25,.1,.25,1]}},exit:{opacity:0,y:-30,transition:{duration:.4,ease:[.25,.1,.25,1]}}},initial:"initial",animate:"animate",exit:"exit",className:"flex min-h-screen bg-gray-50",children:[(0,a.jsx)(o.A,{}),(0,a.jsxs)("div",{className:"flex-1 py-3 sm:py-6 pl-[2%] sm:pl-[3%] pr-[3%] sm:pr-[5%] overflow-x-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-700",children:"Approved Proposals"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 border-b-3 border-black pb-2 sm:pb-4 border-red-700",children:"Track all your collaboration proposals that have been approved with BPI."}),(0,a.jsx)("div",{className:"border border-gray-500 rounded-lg p-5 bg-white drop-shadow-xl mt-5",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm rounded-lg overflow-hidden min-w-[600px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal ID"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal Title"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Approved Date"}),(0,a.jsx)("th",{className:"p-3 text-center text-red-700 whitespace-nowrap",children:"Action"})]})}),(0,a.jsx)("tbody",{children:p?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Loading approved proposals..."})}):0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"No approved proposals found."})}):t.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"p-3 whitespace-nowrap",children:e.id}),(0,a.jsx)("td",{className:"p-3",children:e.title}),(0,a.jsx)("td",{className:"p-3",children:e.status}),(0,a.jsx)("td",{className:"p-3 whitespace-nowrap",children:(e=>{let t=new Date(e);return"".concat(t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})," | ").concat(t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})(e.updated_at||e.created_at)}),(0,a.jsx)("td",{className:"p-3 text-center",children:"â‹®"})]},t))})]})})})]})]},"collabapproved-page")})})})}},8910:(e,t,r)=>{Promise.resolve().then(r.bind(r,6027))},9053:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),o=r(5695),s=r(2115);function n(e){let{children:t,allowedRoles:r}=e,n=(0,o.useRouter)(),[l,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=sessionStorage.getItem("access_token"),t=sessionStorage.getItem("role");return e&&t?r.includes(t)?void i(!1):void n.push("/"):void n.push("/login")},[n,r]),(0,a.jsx)(a.Fragment,{children:t})}},9460:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(5155),o=r(2115),s=r(5695),n=r(8274);function l(){let e=(0,s.usePathname)(),[t,r]=(0,o.useState)(null);return(0,o.useEffect)(()=>{r(sessionStorage.getItem("role"))},[]),(0,a.jsxs)(n.P.aside,{initial:{x:-250,opacity:0},animate:{x:0,opacity:1},exit:{x:-250,opacity:0},transition:{duration:.2,ease:[.25,.1,.25,1]},className:"pl-4 group relative bg-white border-r flex flex-col items-center items-start py-4 space-y-6 h-screen w-20 hover:w-56 transition-all duration-300 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pl-1",children:[(0,a.jsx)("img",{src:"/logo/synsei_icon.png",alt:"Logo",className:"w-10"}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Synsei"})]}),(0,a.jsx)("nav",{className:"flex flex-col space-y-2 w-[92%]",children:("user"===t?[{href:"/dashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/collabapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/collabinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/collabrejected",icon:"/images/Folder_del.png",label:"Rejected"}]:"employee"===t?[{href:"/bpidashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/bpifilesviewer",icon:"/images/Folder_del.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:"admin"===t?[{href:"/admindashboard",icon:"/images/Sidebar_home.png",label:"Home"},{href:"/bpiapproved",icon:"/images/Folder_check.png",label:"Approved"},{href:"/bpiinprocess",icon:"/images/folder-send.png",label:"In Process"},{href:"/bpirejected",icon:"/images/Folder_del.png",label:"Rejected"},{href:"/adminfilesviewer",icon:"/images/Folder_del.png",label:"FileViewer"},{href:"/companylist",icon:"/images/building-03.png",label:"Collaborators"},{href:"/bpifindcollab",icon:"/images/peer-to-peer-02.png",label:"Find Collaborators"}]:[]).map((t,r)=>(0,a.jsxs)("a",{href:t.href,className:"flex items-center gap-3 rounded-lg transition-all duration-200\n              ".concat(e===t.href?"bg-[#FEC2C5]":"hover:bg-gray-100","\n              px-2 py-2 w-12 group-hover:w-full"),children:[(0,a.jsx)("img",{src:t.icon,alt:t.label,className:"w-8 h-8"}),(0,a.jsx)("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:t.label})]},r))})]})}}},e=>{e.O(0,[8324,8441,5964,7358],()=>e(e.s=8910)),_N_E=e.O()}]);