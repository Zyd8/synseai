(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9295],{1800:(e,t,s)=>{Promise.resolve().then(s.bind(s,4629))},4436:(e,t,s)=>{"use strict";s.d(t,{k5:()=>d});var a=s(2115),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(r),o=["attr","size","title"];function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach(function(t){var a,r,l;a=e,r=t,l=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function d(e){return t=>a.createElement(m,n({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,s)=>a.createElement(t.tag,c({key:s},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var s,{attr:r,size:l,title:i}=e,d=function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,o),m=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:s,style:c(c({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==l?a.createElement(l.Consumer,null,e=>t(e)):t(r)}},4629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),r=s(2115),l=s(9053),o=s(9911),n=s(5695),i=s(6874),c=s.n(i);let d="https://zydev.pythonanywhere.com",m={async getProposal(e){let t=sessionStorage.getItem("access_token");if(!t)throw Error("No access token found. Please log in again.");try{console.log("Fetching proposal from: ".concat(d,"/api/proposal/").concat(e));let s=await fetch("".concat(d,"/api/proposal/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!s.ok){let e=await s.text();throw Error("Failed to fetch proposal: ".concat(s.status," ").concat(s.statusText," - ").concat(e))}return await s.json()}catch(e){throw console.error("getProposal error:",e),e}}},u=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),x=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});function h(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(p,{})})}function p(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),b=(0,n.useRouter)(),f=(0,n.useSearchParams)(),g=null==f?void 0:f.get("id");if((0,r.useEffect)(()=>{(async()=>{try{if(i(!0),p(null),console.log("BPI Proposal Tracking - Proposal ID from URL:",g),console.log("API Base URL:",d),!g)return void p("No proposal ID provided in URL");let e=await m.getProposal(parseInt(g));console.log("Fetched proposal:",e);let s=(e=>{let t=[];t.push({id:"".concat(e.id,"-submitted"),date:u(e.created_at),time:x(e.created_at),title:"Proposal Submitted",description:'Proposal "'.concat(e.title,'" was submitted by ').concat(e.company_name||"the company","."),status:"SUBMITTED",created_at:e.created_at});let s=e.status.toUpperCase();return"ONGOING"===s?t.push({id:"".concat(e.id,"-ongoing"),date:u(e.updated_at||e.created_at),time:x(e.updated_at||e.created_at),title:"Review In Progress",description:"This proposal is currently under review by the BPI team.",status:"ONGOING",created_at:e.updated_at||e.created_at}):"APPROVED"===s?(t.push({id:"".concat(e.id,"-ongoing"),date:u(e.updated_at||e.created_at),time:x(e.updated_at||e.created_at),title:"Review In Progress",description:"This proposal was under review by the BPI team.",status:"ONGOING",created_at:e.updated_at||e.created_at}),t.push({id:"".concat(e.id,"-approved"),date:u(e.updated_at),time:x(e.updated_at),title:"Proposal Approved",description:"This proposal has been approved and BPI will proceed with the collaboration.",status:"APPROVED",created_at:e.updated_at})):"REJECTED"===s&&t.push({id:"".concat(e.id,"-rejected"),date:u(e.updated_at||e.created_at),time:x(e.updated_at||e.created_at),title:"Proposal Status Update",description:"This proposal has been reviewed and requires further attention or modifications.",status:"REJECTED",created_at:e.updated_at||e.created_at}),t})(e);t({...e,timeline:s})}catch(e){console.error("Error fetching proposal:",e),p(e instanceof Error?e.message:"Failed to fetch proposal data")}finally{i(!1)}})()},[g]),s)return(0,a.jsx)(l.A,{allowedRoles:["employee"],children:(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#B11016] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading proposal data..."})]})})});if(h)return(0,a.jsx)(l.A,{allowedRoles:["employee"],children:(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.98-.833-2.75 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Proposal"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:h}),(0,a.jsxs)("div",{className:"space-x-4",children:[(0,a.jsx)("button",{onClick:()=>b.push("/bpidashboard"),className:"bg-[#B11016] text-white px-6 py-2 rounded hover:bg-[#800b10] transition-colors",children:"Back to Dashboard"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 transition-colors",children:"Retry"})]})]})})});if(!e)return(0,a.jsx)(l.A,{allowedRoles:["employee"],children:(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Proposal Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"The requested proposal could not be found."}),(0,a.jsx)("button",{onClick:()=>b.push("/bpidashboard"),className:"bg-[#B11016] text-white px-6 py-2 rounded hover:bg-[#800b10] transition-colors",children:"Back to Dashboard"})]})})});let v=(e=>{switch(e.toUpperCase()){case"SUBMITTED":case"REJECTED":default:return 1;case"ONGOING":return 2;case"APPROVED":return 3}})(e.status),j="REJECTED"===e.status.toUpperCase();return(0,a.jsx)(l.A,{allowedRoles:["employee"],children:(0,a.jsxs)("div",{className:"min-h-screen bg-white flex flex-col items-center px-[10%] py-8",children:[(0,a.jsxs)("div",{className:"relative flex items-center w-full mt-2 mb-10",children:[(0,a.jsxs)("button",{onClick:()=>b.push("/bpidashboard"),className:"absolute left-0 flex items-center text-[#B11016] hover:text-[#800b10] transition-colors",children:[(0,a.jsx)(o.QVr,{className:"mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Back to Dashboard"})]}),(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-4xl font-bold text-[#B11016] pb-4",children:"Proposal Review"}),(0,a.jsx)("p",{className:"text-md text-black mb-6",children:"Review and manage collaboration proposal details."}),(0,a.jsx)("div",{className:"mx-2 border-b-[3px] border-[#B11016]"})]})]}),(0,a.jsxs)("div",{className:"relative flex items-center justify-between w-full mb-10 mt-10",children:[(0,a.jsx)("div",{className:"absolute top-5 left-10 right-1/2 h-1 z-0 mr-4 ".concat(v>=2&&!j?"bg-red-700":"bg-gray-300")}),(0,a.jsx)("div",{className:"absolute top-5 left-1/2 right-10 h-1 z-0 ml-5 ".concat(v>=3&&!j?"bg-red-700":"bg-gray-300")}),(0,a.jsxs)("div",{className:"flex flex-col items-center z-10",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full font-bold ".concat(v>=1?j?"bg-red-500 text-white":"bg-red-700 text-white":"border-2 border-gray-400 bg-white text-gray-500"),children:v>=1?"✓":"1"}),(0,a.jsx)("span",{className:"mt-2 font-bold text-xs sm:text-sm ".concat(v>=1?"text-black":"text-gray-400"),children:"SUBMITTED"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center z-10",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full font-bold ".concat(v>=2&&!j?"bg-red-700 text-white":"border-2 border-gray-400 bg-white text-gray-500"),children:"2"}),(0,a.jsx)("span",{className:"mt-2 font-bold text-xs sm:text-sm ".concat(v>=2&&!j?"text-black":"text-gray-400"),children:"IN PROGRESS"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center z-10",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full font-bold ".concat(v>=3&&!j?"bg-red-700 text-white":"border-2 border-gray-400 bg-white text-gray-500"),children:v>=3&&!j?"✓":"3"}),(0,a.jsx)("span",{className:"mt-2 font-bold text-xs sm:text-sm ".concat(v>=3&&!j?"text-black":"text-gray-400"),children:"APPROVED"})]})]}),j&&(0,a.jsx)("div",{className:"w-full mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Proposal Requires Attention"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,a.jsx)("p",{children:"This proposal requires further review or modifications. Follow up with the company for additional details."})})]})]})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{className:"block text-sm sm:text-base font-medium text-red-600 mb-4",children:"PROPOSAL TITLE"}),(0,a.jsxs)("div",{className:"relative w-full mb-6",children:[(0,a.jsx)("input",{type:"text",value:e.title,readOnly:!0,className:"w-full px-3 py-3 border-0    bg-[#E7E7E7] text-gray-900   focus:outline-none text-sm sm:text-base"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-[#B11016]"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm sm:text-base font-medium text-red-600 mb-4",children:"TYPE OF COLLABORATION"}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",{type:"text",value:e.collab_type||"Not specified",readOnly:!0,className:"w-full px-3 py-3 border-0    bg-[#E7E7E7] text-gray-900   focus:outline-none text-sm sm:text-base"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-[#B11016]"})]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm sm:text-base font-medium text-red-600 mb-4",children:"COMPANY NAME"}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",{type:"text",value:e.company_name||"Unknown Company",readOnly:!0,className:"w-full px-3 py-3 border-0    bg-[#E7E7E7] text-gray-900   focus:outline-none text-sm sm:text-base"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-[#B11016]"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("label",{className:"block text-sm sm:text-base font-medium text-red-600 mb-4",children:"PROPOSAL DESCRIPTION"}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("textarea",{value:e.description,readOnly:!0,rows:4,className:"w-full px-3 py-3 border-0    bg-[#E7E7E7] text-gray-900   focus:outline-none text-sm sm:text-base resize-none"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-[#B11016]"})]})]})]}),(0,a.jsxs)("div",{className:"w-full mt-12",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-[#B11016]",children:"STATUS HISTORY"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Track the progress of this proposal submission"})]}),(0,a.jsxs)("div",{className:"relative",children:[e.timeline.length>0&&(0,a.jsx)("div",{className:"absolute left-[22px] top-0 bottom-0 w-[2px] bg-[#B11016]"}),(0,a.jsxs)("div",{className:"space-y-6",children:[e.timeline.map((e,t)=>(0,a.jsxs)("div",{className:"relative flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-11 h-11 rounded-full flex items-center justify-center z-10 ".concat("REJECTED"===e.status?"bg-red-500":"APPROVED"===e.status?"bg-green-600":"ONGOING"===e.status?"bg-yellow-600":"bg-[#B11016]"),children:(0,a.jsx)("span",{className:"text-white text-lg",children:"REJECTED"===e.status?"!":"APPROVED"===e.status?"✓":"ONGOING"===e.status?"⏳":"✓"})}),(0,a.jsxs)("div",{className:"ml-6 border border-gray-300 rounded-lg p-4 flex-1 ".concat("REJECTED"===e.status?"bg-red-50 border-red-200":"APPROVED"===e.status?"bg-green-50 border-green-200":"ONGOING"===e.status?"bg-yellow-50 border-yellow-200":"bg-gray-100"),children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:[e.date," | ",e.time]}),(0,a.jsx)("div",{className:"text-base font-semibold mb-2 ".concat("REJECTED"===e.status?"text-red-800":"APPROVED"===e.status?"text-green-800":"ONGOING"===e.status?"text-yellow-800":"text-gray-800"),children:e.title}),(0,a.jsx)("div",{className:"text-sm ".concat("REJECTED"===e.status?"text-red-700":"APPROVED"===e.status?"text-green-700":"ONGOING"===e.status?"text-yellow-700":"text-gray-700"),children:e.description})]})]},e.id)),0===e.timeline.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("p",{children:"No timeline data available"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Timeline will update as the proposal progresses"})]})]})]})]}),(0,a.jsx)("div",{className:"w-full mt-10 space-y-4",children:(0,a.jsx)(c(),{href:"/collabfiles".concat(g?"?proposalId=".concat(g):""),children:(0,a.jsx)("button",{className:"w-full bg-[#B11016] border-2 border-transparent text-white py-3 px-6 font-bold text-lg hover:bg-white hover:border-[#B11016] hover:text-[#B11016] transition-colors",children:"VIEW PROPOSAL FILES"})})})]})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},9053:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),r=s(5695),l=s(2115);function o(e){let{children:t,allowedRoles:s}=e,o=(0,r.useRouter)(),[n,i]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=sessionStorage.getItem("access_token"),t=sessionStorage.getItem("role");return e&&t?s.includes(t)?void i(!1):void o.push("/"):void o.push("/login")},[o,s]),(0,a.jsx)(a.Fragment,{children:t})}}},e=>{e.O(0,[6711,6874,8441,5964,7358],()=>e(e.s=1800)),_N_E=e.O()}]);