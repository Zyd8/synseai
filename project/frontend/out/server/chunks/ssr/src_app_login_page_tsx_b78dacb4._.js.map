{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Zyd/Documents/GitHub/synseai/project/frontend/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\nimport React, { useState, MouseEvent } from 'react';\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function LoginPage() {\r\n  const API = process.env.NEXT_PUBLIC_API_URL;\r\n  const [email, setEmail] = useState<string>('');\r\n  const [password, setPassword] = useState<string>('');\r\n  const [message, setMessage] = useState<string | null>(null);\r\n  const [messageType, setMessageType] = useState<'error' | 'success'>('error');\r\n  const router = useRouter();\r\n\r\n  const handleSubmit = async (e: MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n\r\n    if (!email.trim() || !password.trim()) {\r\n      setMessage(\"Please fill in all required fields.\");\r\n      setMessageType(\"error\");\r\n      return;\r\n    }\r\n\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      setMessage(\"Please enter a valid email address.\");\r\n      setMessageType(\"error\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${API}/api/auth/login`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.access_token) {\r\n        sessionStorage.setItem(\"access_token\", data.access_token);\r\n\r\n        if (data.user) {\r\n          sessionStorage.setItem(\"user\", JSON.stringify(data.user));\r\n          sessionStorage.setItem(\"user_id\", data.user.id.toString());\r\n          if (data.user.department_id !== null && data.user.department_id !== undefined) {\r\n            sessionStorage.setItem(\"department_id\", data.user.department_id.toString());\r\n          }\r\n        }\r\n\r\n        const role = data.user?.role;\r\n        if (role) {\r\n          sessionStorage.setItem(\"role\", role);\r\n          setMessage(\"Login successful!\");\r\n          setMessageType(\"success\");\r\n\r\n          const token = data.access_token;\r\n          const companyRes = await fetch(`${API}/api/company`, {\r\n            headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\r\n          });\r\n\r\n          if (!companyRes.ok) {\r\n            router.replace(\"/collabhome\");\r\n            return;\r\n          }\r\n\r\n          setTimeout(() => {\r\n            if (role === \"user\") router.push(\"/dashboard\");\r\n            else if (role === \"employee\") router.push(\"/bpidashboard\");\r\n            else if (role === \"admin\") router.push(\"/admindashboard\");\r\n            else router.push(\"/collabhome\");\r\n          }, 800);\r\n        } else {\r\n          setMessage(\"No role found, redirecting...\");\r\n          setMessageType(\"error\");\r\n          setTimeout(() => router.push(\"/collabhome\"), 1000);\r\n        }\r\n      } else {\r\n        setMessage(data.message || \"Login failed. Please check your credentials.\");\r\n        setMessageType(\"error\");\r\n      }\r\n    } catch (err: any) {\r\n      console.error(\"Login error:\", err);\r\n      setMessage(err.message || \"An error occurred during login.\");\r\n      setMessageType(\"error\");\r\n    }\r\n  };\r\n\r\n  // âœ… Motion variants\r\n  const containerVariants = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    visible: {\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: { duration: 0.6, ease: [0.25, 0.1, 0.25, 1] as [number, number, number, number], staggerChildren: 0.15 }\r\n    }\r\n  };\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    visible: { opacity: 1, y: 0, transition: { duration: 0.5, ease: [0.25, 0.1, 0.25, 1] as [number, number, number, number], } }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white flex flex-col items-center px-4 py-6 sm:py-8\">\r\n      {/* Logo */}\r\n      <motion.div \r\n        initial={{ opacity: 0, y: -30 }} \r\n        animate={{ opacity: 1, y: 0 }} \r\n        transition={{ duration: 0.7, ease: [0.25, 0.1, 0.25, 1] as [number, number, number, number], }}\r\n        className=\"mb-6 sm:mb-8\"\r\n      >\r\n        <img\r\n          src=\"/logo/main_logo.png\"\r\n          alt=\"SynseAI\"\r\n          className=\"h-auto w-32 sm:w-40 md:w-48 mx-auto pt-6\"\r\n        />\r\n      </motion.div>\r\n\r\n      {/* Content */}\r\n      <motion.div \r\n        variants={containerVariants}\r\n        initial=\"hidden\"\r\n        animate=\"visible\"\r\n        className=\"w-full max-w-6xl flex flex-col lg:flex-row justify-between items-center gap-6 lg:gap-8\"\r\n      >\r\n        {/* Banner */}\r\n        <motion.div variants={itemVariants} className=\"w-full lg:w-1/2 order-1 lg:order-2\">\r\n          <motion.img\r\n            src=\"/images/loginbanner.png\"\r\n            alt=\"Login Illustration\"\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            transition={{ duration: 0.8, ease: [0.25, 0.1, 0.25, 1] as [number, number, number, number], }}\r\n            className=\"w-full h-auto object-contain max-w-md mx-auto lg:max-w-none\"\r\n          />\r\n        </motion.div>\r\n\r\n        {/* Login Form */}\r\n        <motion.div \r\n          variants={itemVariants}\r\n          className=\"w-full lg:w-1/2 max-w-md lg:max-w-lg order-2 lg:order-1 px-6 sm:px-10 lg:px-8 py-2\"\r\n        >\r\n          <motion.div variants={containerVariants} className=\"space-y-6\">\r\n            {/* Message */}\r\n            {message && (\r\n              <motion.div\r\n                initial={{ opacity: 0, scale: 0.9 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                className={`px-4 py-2 rounded-md text-white text-sm sm:text-base font-medium ${\r\n                  messageType === \"error\" ? \"bg-red-500\" : \"bg-green-500\"\r\n                }`}\r\n              >\r\n                {message}\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* Email */}\r\n            <motion.div variants={itemVariants}>\r\n              <label className=\"block text-sm sm:text-base font-medium text-[#B11016] mb-2\">\r\n                EMAIL\r\n              </label>\r\n              <div className=\"relative w-full group\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"Enter your email\"\r\n                  className=\"appearance-none w-full px-0 py-3 border-0 placeholder-gray-400 text-gray-900 bg-transparent focus:outline-none text-sm sm:text-base\"\r\n                />\r\n                <div className=\"absolute left-0 bottom-0 w-full h-[2px] bg-gray-300\" />\r\n                <div className=\"absolute left-0 bottom-0 h-[2px] bg-[#B11016] transition-transform duration-300 ease-in-out origin-center scale-x-0 w-full group-focus-within:scale-x-100\" />\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* Password */}\r\n            <motion.div variants={itemVariants}>\r\n              <label className=\"block text-sm sm:text-base font-medium text-[#B11016] mb-2\">\r\n                PASSWORD\r\n              </label>\r\n              <div className=\"relative w-full group\">\r\n                <input\r\n                  type=\"password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Enter your password\"\r\n                  className=\"appearance-none w-full px-0 py-3 border-0 placeholder-gray-400 text-gray-900 bg-transparent focus:outline-none text-sm sm:text-base\"\r\n                />\r\n                <div className=\"absolute left-0 bottom-0 w-full h-[2px] bg-gray-300\" />\r\n                <div className=\"absolute left-0 bottom-0 h-[2px] bg-[#B11016] transition-transform duration-300 ease-in-out origin-center scale-x-0 w-full group-focus-within:scale-x-100\" />\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* Forgot Password */}\r\n            <motion.div variants={itemVariants} className=\"text-left mt-0\">\r\n              <a className=\"text-sm sm:text-md text-[#B11016] hover:text-red-500 font-medium cursor-pointer transition-colors duration-200\">\r\n                Forgot password?\r\n              </a>\r\n            </motion.div>\r\n\r\n            {/* Login Button */}\r\n            <motion.button\r\n              type=\"button\"\r\n              onClick={handleSubmit}\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n              className=\"mt-8 sm:mt-15 w-full flex justify-center py-3 sm:py-3 px-3 border border-transparent rounded-md text-sm font-bold text-white bg-[#B11016] hover:text-[#B11016] hover:bg-white hover:border-[#B11016] transition-all duration-300 ease-in-out text-base sm:text-lg\"\r\n            >\r\n              LOGIN\r\n            </motion.button>\r\n\r\n            {/* Register */}\r\n            <motion.div variants={itemVariants} className=\"text-center pt-0\">\r\n              <span className=\"text-sm sm:text-md text-gray-600\">\r\n                Don't have an account?{\" \"}\r\n                <span className=\"font-medium text-[#B11016] hover:text-red-500 underline cursor-pointer transition-colors duration-200\">\r\n                  <Link href=\"/signup\">Register now</Link>\r\n                </span>\r\n              </span>\r\n            </motion.div>\r\n          </motion.div>\r\n        </motion.div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}